{"version":3,"file":"index.js","mappings":"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","sources":["webpack://js-service-calls/./src/controller.js","webpack://js-service-calls/./src/react.js","webpack://js-service-calls/./src/storage.js","webpack://js-service-calls/webpack/bootstrap","webpack://js-service-calls/./src/index.js"],"sourcesContent":["const react = require(\"./react.js\");\nconst storage = require(\"./storage\");\n\nconst controller = {\n  user: {\n    fetchSession() {\n      return fetch(\"/api/session/\")\n        .catch((err) => (storage.errMsg = \"Invalid Credential, plesae login\"))\n        .then((res) => {\n          if (!res.ok) {\n            return res.json().then((err) => {\n              storage.errMsg = \"Invalid Credential, plesae login\";\n            });\n          }\n          return res.json();\n        })\n        .then((res) => console.log(res));\n    },\n\n    fetchLogin(username) {\n      const session = fetch(\"/api/session/\", {\n        method: \"PUT\",\n        headers: {\n          \"content-type\": \"application/json\", // set this header when sending JSON in the body of request\n        },\n        body: JSON.stringify({ username }),\n      })\n        .catch((err) => {\n          storage.errMsg = \"Network Error, try again\";\n          // Promise.reject({ error: \"network-error\" });\n        })\n        .then((response) => {\n          if (!response.ok) {\n            return response.json().then((err) => {\n              storage.errMsg = \"Invalid Credential, please login\";\n              // Promise.reject(err);\n            });\n          }\n          return response.json();\n        })\n        .then((response) => {\n          storage.username = response.username;\n          console.log(storage);\n        });\n      return session;\n    },\n\n    fetchLogout() {\n      const session = fetch(\"/api/session/\", {\n        method: \"DELETE\",\n        headers: {\n          \"content-type\": \"application/json\", // set this header when sending JSON in the body of request\n        },\n      }).catch((err) => Promise.reject({ error: \"network-error\" }));\n      return session;\n    },\n  },\n  word: {\n    fetchWord() {\n      return fetch(\"/api/word\", {\n        method: \"GET\",\n      })\n        .catch((err) => {\n          console.log(err);\n          storage.errMsg = \"Network Error, try again\";\n        })\n        .then((response) => {\n          console.log(\"fetching words\");\n          if (!response.ok) {\n            return response.json().then((err) => {\n              storage.errMsg = \"Error fetching words, try again\";\n            });\n          }\n          return response.json();\n        })\n        .then((res) => {\n          console.log(res);\n          if (res.storedWord.length > 0) {\n            const wordList = res.storedWord.split(\",\");\n            storage.wordList = wordList;\n          }\n          return;\n        });\n    },\n\n    addWord(word) {\n      console.log({ word: word });\n      return fetch(\"/api/word\", {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\",\n        },\n        body: JSON.stringify({ word }),\n      })\n        .catch((err) => {\n          storage.errMsg = \"Network Error, try again\";\n        })\n        .then((response) => {\n          if (!response.ok) {\n            return response.json().then((err) => {\n              storage.errMsg = `Error adding word ${word}, try again`;\n            });\n          }\n          return response.json();\n        })\n        .then((response) => (storage.wordList = response.storedWord));\n    },\n  },\n\n  initEventListener() {\n    const appEl = document.querySelector(\"#app\");\n    appEl.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      console.log(react);\n      switch (e.target.className) {\n        case \"username-submit\":\n          const usernameEl = document.querySelector(\".username-input\");\n          console.log(`Logging in with ${usernameEl.value}`);\n          controller.user\n            .fetchLogin(usernameEl.value)\n            .then(() => controller.word.fetchWord())\n            .then(() => react.render());\n          break;\n        case \"logout\":\n          console.log(\"logging out\");\n          controller.user.fetchLogout().then(() => {\n            storage.username = undefined;\n            storage.wordList = [];\n            react.render();\n          });\n          break;\n        case \"word-submit\":\n          const wordInputEl = document.querySelector(\".word-input\");\n          controller.word\n            .addWord(wordInputEl.value)\n            .then(() => controller.word.fetchWord())\n            .then(() => react.render());\n\n          break;\n        default:\n          break;\n      }\n    });\n  },\n};\nmodule.exports = controller;\n","const controller = require(\"./controller.js\");\nconst storage = require(\"./storage.js\");\nconsole.log(controller);\n\nconst react = {\n  render() {\n    react.renderUserStatus();\n    react.renderLoginForm();\n    react.renderWordForm();\n  },\n  renderUserStatus() {\n    const userEl = document.querySelector(\".user\");\n    const isLoggedIn = storage.username !== undefined;\n    const loginHTML = `<a href=\"\" class=\"login\">Log In</a>`;\n    const logoutHTML = `<a href=\"\" class=\"logout\">Log out</a>`;\n    userEl.innerHTML = isLoggedIn ? logoutHTML : loginHTML;\n    console.log(storage.username);\n  },\n\n  renderLoginForm() {\n    const loginEl = document.querySelector(\".login-form\");\n    if (!storage.username) {\n      loginEl.innerHTML = `\n          <form action=\"\">\n              <label>Username: <input type=\"text\" class=\"username-input\"></label>\n              <button type=\"submit\" class=\"username-submit\">Submit</button>\n          </form>\n          `;\n    } else {\n      loginEl.innerHTML = \"\";\n    }\n  },\n  renderWordForm() {\n    const wordList = storage.wordList;\n    const wordEl = document.querySelector(\".words\");\n    console.log(wordList.length > 0 && wordList[0].length > 0);\n    if (storage.username) {\n      const wordListHTML = `<ul class=\"word-list\">\n      ${wordList\n        .map((entry) => `<li class='word-list-item'>${entry}</li>`)\n        .join(\"\")}\n    </ul>`;\n      const wordInputHTML = `\n    <form action=\"\">\n      <label>\n        Update word: <input type=\"text\" class=\"word-input\"></input>\n      </label>\n      <button class='word-submit' type=\"submit\">Submit</button>\n    </form>`;\n      wordEl.innerHTML = [wordListHTML, wordInputHTML].join(\"\");\n    } else {\n      wordEl.innerHTML = \"\";\n    }\n  },\n};\n\nmodule.exports = react;\n","const storage = {\n  username: undefined,\n  wordList: [],\n  errMsg: \"\",\n};\n\nmodule.exports = storage;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const controller = require(\"./controller.js\");\nconst react = require(\"./react.js\");\n// controller.user.fetchLogout();\nreact.render();\ncontroller.initEventListener();\n"],"names":["react","require","storage","controller","user","fetchSession","fetch","err","errMsg","then","res","ok","json","console","log","fetchLogin","username","session","method","headers","body","JSON","stringify","response","fetchLogout","Promise","reject","error","word","fetchWord","storedWord","length","wordList","split","addWord","initEventListener","appEl","document","querySelector","addEventListener","e","preventDefault","target","className","usernameEl","value","render","undefined","wordInputEl","module","exports","renderUserStatus","renderLoginForm","renderWordForm","userEl","isLoggedIn","loginHTML","logoutHTML","innerHTML","loginEl","wordEl","wordListHTML","map","entry","join","wordInputHTML"],"sourceRoot":""}