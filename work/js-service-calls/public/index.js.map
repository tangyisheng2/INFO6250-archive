{"version":3,"file":"index.js","mappings":"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","sources":["webpack://js-service-calls/./src/controller.js","webpack://js-service-calls/./src/react.js","webpack://js-service-calls/./src/storage.js","webpack://js-service-calls/webpack/bootstrap","webpack://js-service-calls/./src/index.js"],"sourcesContent":["const react = require(\"./react.js\");\nconst storage = require(\"./storage\");\n\nconst controller = {\n  user: {\n    fetchSession() {\n      return fetch(\"/api/session/\")\n        .catch((err) => (storage.errMsg = \"Invalid Credential, plesae login\"))\n        .then((res) => {\n          if (!res.ok) {\n            return res.json().then((err) => {\n              storage.errMsg = \"Invalid Credential, plesae login\";\n              return Promise.reject(err);\n            });\n          }\n          return res.json();\n        })\n        .then((res) => {\n          if (res.username) {\n            storage.username = res.username;\n          } else {\n            storage.username = undefined;\n            storage.wordList = [];\n          }\n        });\n    },\n\n    fetchLogin(username) {\n      const session = fetch(\"/api/session/\", {\n        method: \"PUT\",\n        headers: {\n          \"content-type\": \"application/json\", // set this header when sending JSON in the body of request\n        },\n        body: JSON.stringify({ username }),\n      })\n        .catch((err) => {\n          storage.errMsg = \"Network Error, try again\";\n          return Promise.reject({ error: \"network-error\" });\n        })\n        .then((response) => {\n          if (!response.ok) {\n            return response.json().then((err) => {\n              storage.errMsg = \"Invalid Credential, please login\";\n              react.render();\n              return Promise.reject(err);\n            });\n          }\n          return response.json();\n        })\n        .then((response) => {\n          console.log(response);\n          storage.username = response.username || undefined;\n          console.log(storage);\n        });\n      return session;\n    },\n\n    fetchLogout() {\n      const session = fetch(\"/api/session/\", {\n        method: \"DELETE\",\n        headers: {\n          \"content-type\": \"application/json\", // set this header when sending JSON in the body of request\n        },\n      }).catch((err) => Promise.reject({ error: \"network-error\" }));\n      return session;\n    },\n  },\n  word: {\n    fetchWord() {\n      return fetch(\"/api/word\", {\n        method: \"GET\",\n      })\n        .catch((err) => {\n          console.log(err);\n          storage.errMsg = \"Network Error, try again\";\n        })\n        .then((response) => {\n          console.log(\"fetching words\");\n          if (!response.ok) {\n            return response.json().then((err) => {\n              console.log(response);\n              storage.errMsg = \"Error fetching words, try again\";\n              return Promise.reject(err);\n            });\n          }\n          return response.json();\n        })\n        .then((res) => {\n          console.log(res);\n          if (res.storedWord.length > 0) {\n            const wordList = res.storedWord.split(\",\");\n            storage.wordList = wordList;\n          }\n          return;\n        });\n    },\n\n    addWord(word) {\n      console.log({ word: word });\n      return fetch(\"/api/word\", {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\",\n        },\n        body: JSON.stringify({ word }),\n      })\n        .catch((err) => {\n          storage.errMsg = \"Network Error, try again\";\n          return Promise.reject(err);\n        })\n        .then((response) => {\n          if (!response.ok) {\n            return response.json().then((err) => {\n              storage.errMsg = `Error adding word ${word}, try again`;\n            });\n          }\n          return response.json();\n        })\n        .then((response) => (storage.wordList = response.storedWord));\n    },\n  },\n\n  initEventListener() {\n    controller.user.fetchSession();\n    const appEl = document.querySelector(\"#app\");\n    appEl.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      controller.user.fetchSession();\n      console.log(e.target);\n      storage.errMsg = \"\";\n      switch (e.target.className) {\n        case \"username-submit\":\n          const usernameEl = document.querySelector(\".username-input\");\n          console.log(`Logging in with ${usernameEl.value}`);\n          controller.user\n            .fetchLogin(usernameEl.value)\n            .then(() => controller.word.fetchWord())\n            .then(() => react.render());\n          break;\n        case \"logout\":\n          console.log(\"logging out\");\n          controller.user.fetchLogout().then(() => {\n            storage.username = undefined;\n            storage.wordList = [];\n            react.render();\n          });\n          break;\n        case \"word-submit\":\n          const wordInputEl = document.querySelector(\".word-input\");\n          controller.word\n            .addWord(wordInputEl.value)\n            .then(() => controller.word.fetchWord())\n            .then(() => react.render());\n\n          break;\n        default:\n          break;\n      }\n    });\n  },\n};\nmodule.exports = controller;\n","const controller = require(\"./controller.js\");\nconst storage = require(\"./storage.js\");\nconsole.log(controller);\n\nconst react = {\n  render() {\n    react.renderUserStatus();\n    react.renderErrMsg();\n    react.renderLoginForm();\n    react.renderWordForm();\n  },\n  renderUserStatus() {\n    const userEl = document.querySelector(\".user\");\n    const isLoggedIn = storage.username !== undefined;\n    const loginHTML = `<a href=\"\" class=\"login\">Log In</a>`;\n    const logoutHTML = `<a href=\"\" class=\"logout\">Log out</a>`;\n    userEl.innerHTML = isLoggedIn ? logoutHTML : loginHTML;\n    console.log(storage.username);\n  },\n\n  renderLoginForm() {\n    const loginEl = document.querySelector(\".login-form\");\n    if (!storage.username) {\n      loginEl.innerHTML = `\n          <form action=\"\">\n              <label>Username: <input type=\"text\" class=\"username-input\"></label>\n              <button type=\"submit\" class=\"username-submit\">Submit</button>\n          </form>\n          `;\n    } else {\n      loginEl.innerHTML = \"\";\n    }\n  },\n  renderWordForm() {\n    const wordList = storage.wordList;\n    const wordEl = document.querySelector(\".words\");\n    console.log(wordList.length > 0 && wordList[0].length > 0);\n    if (storage.username) {\n      const wordListHTML = wordList[0]\n        ? `<p>Your word is ${wordList[0]} </p>`\n        : `<p>You do not have any word</p>`;\n      const wordInputHTML = `\n    <form action=\"\">\n      <label>\n        Update word: <input type=\"text\" class=\"word-input\"></input>\n      </label>\n      <button class='word-submit' type=\"submit\">Submit</button>\n    </form>`;\n      wordEl.innerHTML = [wordListHTML, wordInputHTML].join(\"\");\n    } else {\n      wordEl.innerHTML = \"\";\n    }\n  },\n  renderErrMsg() {\n    const errorMsgEl = document.querySelector(\".error-msg\");\n    if (storage.errMsg) {\n      errorMsgEl.innerHTML = `<p>${storage.errMsg}</p>`;\n    } else {\n      errorMsgEl.innerHTML = \"\";\n    }\n  },\n};\n\nmodule.exports = react;\n","const storage = {\n  username: undefined,\n  wordList: [],\n  errMsg: \"\",\n};\n\nmodule.exports = storage;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const controller = require(\"./controller.js\");\nconst react = require(\"./react.js\");\n// controller.user.fetchLogout();\nreact.render();\ncontroller.initEventListener();\n"],"names":["react","require","storage","controller","user","fetchSession","fetch","err","errMsg","then","res","ok","json","Promise","reject","username","undefined","wordList","fetchLogin","session","method","headers","body","JSON","stringify","error","response","render","console","log","fetchLogout","word","fetchWord","storedWord","length","split","addWord","initEventListener","appEl","document","querySelector","addEventListener","e","preventDefault","target","className","usernameEl","value","wordInputEl","module","exports","renderUserStatus","renderErrMsg","renderLoginForm","renderWordForm","userEl","isLoggedIn","loginHTML","logoutHTML","innerHTML","loginEl","wordEl","wordListHTML","wordInputHTML","join","errorMsgEl"],"sourceRoot":""}